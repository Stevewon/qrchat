# ğŸ’° QKEY í†µí•© ì‹œìŠ¤í…œ - ë³´ìƒ í†µí•© ì™„ë£Œ

## ğŸ¯ í•µì‹¬ ë³€ê²½ì‚¬í•­

### âœ… ì¶œê¸ˆ ìš”êµ¬ì•¡ í†µì¼
- **ì´ì „**: ë³´ìƒ ì´ë²¤íŠ¸ 10,000 QKEY, ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤ ë³„ë„
- **ë³€ê²½**: **ëª¨ë‘ 1,000 QKEYë¡œ í†µì¼**

### âœ… ê±°ë˜ ë‚´ì—­ í†µí•©
ëª¨ë“  QKEY ì ë¦½/ì‚¬ìš©ì´ **í•˜ë‚˜ì˜ ê±°ë˜ ë‚´ì—­**ì— ê¸°ë¡ë©ë‹ˆë‹¤.

---

## ğŸ“Š QKEY íšë“ ë°©ë²• (ëª¨ë‘ í†µí•©)

| ë°©ë²• | ê¸ˆì•¡ | ê±°ë˜ íƒ€ì… | ì„¤ëª… |
|------|------|-----------|------|
| **ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤** | 5 QKEY | `bonus` | ë§¤ì¼ ì²« ë¡œê·¸ì¸ |
| **ì±„íŒ… í™œë™** | 1~3 QKEY | `earn` | ë©”ì‹œì§€ ì „ì†¡ ì‹œ |
| **ğŸ†• ê·¸ë£¹ ë³´ìƒ ì´ë²¤íŠ¸** | 1~10 QKEY | `bonus` | êµ¬ì²´ í´ë¦­ ì‹œ |
| **ì¹œêµ¬ ì´ˆëŒ€** | 10 QKEY | `bonus` | ì¹œêµ¬ ê°€ì… ì™„ë£Œ ì‹œ |
| **ê´€ë¦¬ì ì§€ê¸‰** | ê°€ë³€ | `bonus` | ê´€ë¦¬ì ìˆ˜ë™ ì§€ê¸‰ |

---

## ğŸ“± ì‚¬ìš©ì í™”ë©´ í†µí•©

### QKEY ì±„êµ´ ë‚´ì—­ í™”ë©´
`lib/screens/qkey_history_screen.dart`

**ê¸°ì¡´ íƒ­ êµ¬ì¡°**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì „ì²´ â”‚ ì ë¦½ â”‚ ì¶œê¸ˆ â”‚ ë³´ë„ˆìŠ¤ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê±°ë˜ ë‚´ì—­ ì˜ˆì‹œ**:
```
ğŸ ê·¸ë£¹ ì±„íŒ… ë³´ìƒ ì´ë²¤íŠ¸
   +5 QKEY
   2026-02-16 15:30

ğŸ ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤
   +5 QKEY
   2026-02-16 09:00

ğŸ’¬ ì±„íŒ… í™œë™
   +2 QKEY
   2026-02-16 14:20
```

### í•„í„°ë§
- **ì „ì²´**: ëª¨ë“  ê±°ë˜ ë‚´ì—­
- **ì ë¦½**: `earn` íƒ€ì…ë§Œ
- **ì¶œê¸ˆ**: `withdraw` íƒ€ì…ë§Œ
- **ë³´ë„ˆìŠ¤**: `bonus` íƒ€ì…ë§Œ (ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤ + ê·¸ë£¹ ë³´ìƒ ì´ë²¤íŠ¸)

---

## ğŸ” ê±°ë˜ ë‚´ì—­ êµ¬ë¶„ ë°©ë²•

### Description í•„ë“œë¡œ êµ¬ë¶„
```dart
// ê¸°ì¡´
description: 'ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤'
description: 'ì±„íŒ… í™œë™'

// ğŸ†• ì¶”ê°€
description: 'ğŸ ê·¸ë£¹ ì±„íŒ… ë³´ìƒ ì´ë²¤íŠ¸'
```

ì‚¬ìš©ìëŠ” ì„¤ëª…ì„ ë³´ê³  ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ QKEYë¥¼ ì–»ì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ’¸ ì¶œê¸ˆ ì‹œìŠ¤í…œ (í†µí•©)

### ì¶œê¸ˆ ìš”êµ¬ ì¡°ê±´
```dart
í˜„ì¬ ì”ì•¡ >= 1,000 QKEY
```

### ì¶œê¸ˆ ì‹ ì²­ í™”ë©´
`lib/screens/profile_screen.dart`

**ì²´í¬ ë¡œì§**:
```dart
if (_qkeyBalance < 1000) {
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(
      content: Text(
        'ìµœì†Œ ì¶œê¸ˆ ê°€ëŠ¥ ê¸ˆì•¡ì€ 1,000 QKEYì…ë‹ˆë‹¤.\n'
        '(í˜„ì¬ ì”ì•¡: $_qkeyBalance QKEY)'
      ),
    ),
  );
  return;
}
```

---

## ğŸ“ˆ ì”ì•¡ ê³„ì‚° (ìë™)

### QKeyServiceê°€ ìë™ìœ¼ë¡œ ê³„ì‚°
```dart
í˜„ì¬ ì”ì•¡ = (ëª¨ë“  ì ë¦½) - (ëª¨ë“  ì¶œê¸ˆ)

ì ë¦½ = earn + bonus (ë¡œê·¸ì¸ + ì±„íŒ… + ê·¸ë£¹ ë³´ìƒ + ì´ˆëŒ€ ë“±)
ì¶œê¸ˆ = withdraw (ì¶œê¸ˆ ì‹ ì²­)
```

---

## ğŸ¨ UI í‘œì‹œ

### í”„ë¡œí•„ í™”ë©´ - QKEY ì„¹ì…˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° QKEY                    â”‚
â”‚                             â”‚
â”‚  í˜„ì¬ ì”ì•¡: 850 QKEY        â”‚
â”‚                             â”‚
â”‚  [ì±„êµ´ ë‚´ì—­] [ì¶œê¸ˆ ì‹ ì²­]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### QKEY ì±„êµ´ ë‚´ì—­ í™”ë©´ - ìƒë‹¨ ì¹´ë“œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í˜„ì¬ ì”ì•¡                   â”‚
â”‚  850 QKEY                   â”‚
â”‚                             â”‚
â”‚  ì´ ì ë¦½: 1,200 QKEY        â”‚
â”‚  ì´ ì¶œê¸ˆ: 350 QKEY          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ê°œë°œì ê°€ì´ë“œ

### QKEY ì§€ê¸‰ í†µí•© ì˜ˆì‹œ

#### ê¸°ì¡´ ë°©ì‹ (ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤)
```dart
await QKeyService.addQKey(
  userId: userId,
  amount: 5,
  type: 'bonus',
  description: 'ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤',
);
```

#### ğŸ†• ê·¸ë£¹ ë³´ìƒ ì´ë²¤íŠ¸
```dart
await QKeyService.addQKey(
  userId: user.id,
  amount: result,
  type: 'bonus',
  description: 'ğŸ ê·¸ë£¹ ì±„íŒ… ë³´ìƒ ì´ë²¤íŠ¸',
);
```

#### ì¹œêµ¬ ì´ˆëŒ€ ë³´ìƒ
```dart
await QKeyService.addQKey(
  userId: inviterId,
  amount: 10,
  type: 'bonus',
  description: 'ì¹œêµ¬ ì´ˆëŒ€ ë³´ë„ˆìŠ¤',
);
```

### ìƒˆë¡œìš´ ë³´ìƒ ì¶”ê°€ ì‹œ
1. `QKeyService.addQKey()` ì‚¬ìš©
2. `type: 'bonus'` ë˜ëŠ” `'earn'` ì„ íƒ
3. `description`ì— ëª…í™•í•œ ì„¤ëª… ì¶”ê°€
4. ì´ëª¨ì§€ ì‚¬ìš© ê¶Œì¥ (ğŸ, ğŸ’°, ğŸ‰ ë“±)

---

## ğŸ“Š í†µê³„ ì¡°íšŒ

### ì‚¬ìš©ìë³„ ë³´ìƒ íˆìŠ¤í† ë¦¬
```dart
// ê·¸ë£¹ ë³´ìƒ ì´ë²¤íŠ¸ë§Œ ì¡°íšŒ
final rewardHistory = await RewardEventService.getUserRewardHistory(userId);

// ëª¨ë“  QKEY ê±°ë˜ ë‚´ì—­ ì¡°íšŒ
final allTransactions = await QKeyService.getUserTransactions(userId);

// í˜„ì¬ ì”ì•¡ ì¡°íšŒ
final balance = await QKeyService.getUserBalance(userId);
```

### ì±„íŒ…ë°©ë³„ í†µê³„
```dart
final stats = await RewardEventService.getChatRoomStats(chatRoomId);
print('ì´ ì´ë²¤íŠ¸ ìˆ˜: ${stats['totalEvents']}');
print('íšë“ëœ ì´ë²¤íŠ¸: ${stats['claimedEvents']}');
print('ì´ ì§€ê¸‰ QKEY: ${stats['totalRewards']}');
```

---

## ğŸ¯ ì‚¬ìš©ì ê²½í—˜ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì²« ì‚¬ìš©ì
```
1. íšŒì›ê°€ì… ì™„ë£Œ
2. ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤: +5 QKEY
3. ì¹œêµ¬ì™€ ì±„íŒ…: +2 QKEY
4. ê·¸ë£¹ ì±„íŒ… ì°¸ì—¬ (3ëª…)
5. 2ë¶„ ëŒ€í™” í›„ êµ¬ì²´ ë“±ì¥
6. í´ë¦­ ì„±ê³µ: +7 QKEY
7. í˜„ì¬ ì”ì•¡: 14 QKEY
8. ëª©í‘œ: 1,000 QKEY ëª¨ìœ¼ê¸°!
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: í™œë°œí•œ ì‚¬ìš©ì
```
ì¼ì£¼ì¼ ì‚¬ìš©:
- ë¡œê·¸ì¸ ë³´ë„ˆìŠ¤: 5 QKEY Ã— 7ì¼ = 35 QKEY
- ì±„íŒ… í™œë™: 2 QKEY Ã— 50íšŒ = 100 QKEY
- ê·¸ë£¹ ë³´ìƒ: 5 QKEY Ã— 30íšŒ = 150 QKEY
- ì¹œêµ¬ ì´ˆëŒ€: 10 QKEY Ã— 5ëª… = 50 QKEY

ì´ ì ë¦½: 335 QKEY
â†’ 3ì£¼ í›„ 1,000 QKEY ë‹¬ì„± ê°€ëŠ¥!
```

---

## âœ… í†µí•© ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ì¶œê¸ˆ ìš”êµ¬ì•¡ 1,000 QKEYë¡œ í†µì¼
- [x] ë³´ìƒ ì´ë²¤íŠ¸ `bonus` íƒ€ì…ìœ¼ë¡œ ê¸°ë¡
- [x] Descriptionì— ì´ëª¨ì§€ ì¶”ê°€ (`ğŸ`)
- [x] ê¸°ì¡´ QKEY ê±°ë˜ ë‚´ì—­ê³¼ í†µí•©
- [x] ê°€ì´ë“œ ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [x] ì¶œê¸ˆ ì‹œìŠ¤í…œ ì—°ë™ í™•ì¸

---

## ğŸš€ ë°°í¬ í›„ ëª¨ë‹ˆí„°ë§

### í™•ì¸ ì‚¬í•­
1. QKEY ì±„êµ´ ë‚´ì—­ì— ë³´ë„ˆìŠ¤ íƒ­ì—ì„œ ê·¸ë£¹ ë³´ìƒ í‘œì‹œ í™•ì¸
2. ì¶œê¸ˆ ì‹ ì²­ ì‹œ 1,000 QKEY ì²´í¬ í™•ì¸
3. ê±°ë˜ ë‚´ì—­ í•„í„°ë§ ì •ìƒ ì‘ë™ í™•ì¸
4. ì”ì•¡ ê³„ì‚° ì •í™•ì„± í™•ì¸

---

**ì—…ë°ì´íŠ¸**: 2026-02-16  
**ë²„ì „**: í†µí•© ì™„ë£Œ
