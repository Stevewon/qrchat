# 🚀 코드 서명 인증서 즉시 구매 가이드

## 📋 준비물 체크리스트

시작하기 전에 다음 항목들을 준비하세요:

### 공통 필요 항목
- [ ] 신용카드 (Visa, Mastercard, Amex)
- [ ] 이메일 주소 (회사 도메인 권장)
- [ ] 전화번호 (인증용)

### macOS용 추가 필요 항목
- [ ] Apple ID (없으면 생성)
- [ ] macOS 컴퓨터 또는 Hackintosh

### Windows용 추가 필요 항목 (OV)
- [ ] 사업자 등록증 스캔본 (PDF)
- [ ] 대표자 신분증 스캔본 (주민등록증 양면)
- [ ] 사업장 전화번호 (검증용)
- [ ] 회사 이메일 주소

---

## 🍎 Part 1: Apple Developer 즉시 구매 ($99)

### ⏱️ 소요 시간: 15분 (승인 대기 1-2일)

### Step 1: Apple ID 생성 (이미 있으면 Skip)

1. **브라우저 열기**
   ```
   https://appleid.apple.com/account
   ```

2. **"Create Your Apple ID" 클릭**

3. **정보 입력**
   - 이름: `홍길동` (실명)
   - 국가/지역: `대한민국`
   - 생년월일: `1990-01-01`
   - 이메일: `stevewon@qrchat.io` (또는 본인 이메일)
   - 전화번호: `+82-10-1234-5678`
   - 비밀번호: 강력한 비밀번호
   - 보안 질문: 3개 설정

4. **이메일 인증**
   - 받은 메일에서 6자리 코드 입력
   - 전화번호 SMS 인증

---

### Step 2: Apple Developer Program 가입

#### 🔗 **즉시 시작**: https://developer.apple.com/programs/enroll/

1. **"Start Your Enrollment" 버튼 클릭**

2. **Apple ID 로그인**
   - 위에서 만든 Apple ID로 로그인
   - 2단계 인증 코드 입력

3. **Entity Type 선택**
   
   **✅ 권장: Individual (개인)**
   - 빠른 승인 (1-2일)
   - 간단한 절차
   - 신분증만 필요
   - 나중에 Organization으로 전환 가능
   
   **Organization (법인)** - 시간이 오래 걸림
   - 승인 1-2주 소요
   - 사업자 등록증 필요
   - DUNS 번호 필요 (신청에 2주)

4. **개인정보 입력 (Individual 기준)**
   ```
   Legal Name:        홍길동 (여권 영문명과 동일하게)
   Country/Region:    South Korea
   Phone Number:      +82-10-1234-5678
   Address:           서울시 강남구 테헤란로 123
   City:              Seoul
   State/Province:    Seoul
   Postal Code:       06234
   ```

5. **약관 동의**
   - [ ] Apple Developer Program License Agreement 체크
   - "Continue" 클릭

6. **결제 정보 입력**
   ```
   카드 종류:    Visa / Mastercard / Amex
   카드 번호:    1234-5678-9012-3456
   만료일:      12/27
   CVV:        123
   청구지 주소:  위에 입력한 주소와 동일
   ```

7. **구매 확인**
   - Total: **$99.00 USD** (약 ₩130,000)
   - "Purchase" 버튼 클릭

8. **확인 이메일 받기**
   - "Your enrollment is being processed" 이메일 수신
   - 주문 번호 저장

---

### Step 3: 승인 대기 및 확인

#### 📧 이메일 확인 (수분 내)
```
제목: Verify your email address for Apple Developer
→ "Verify Now" 링크 클릭
```

#### 📱 전화 인증 (1-2일 내, 선택적)
- Apple에서 전화가 올 수 있음
- "Apple Developer Program 신청 확인" 요청
- "Yes" 답변

#### ✅ 승인 완료 이메일 (1-2일 내)
```
제목: Welcome to the Apple Developer Program
→ 이제 사용 가능!
```

#### 🎉 승인되면 바로 확인
```
https://developer.apple.com/account
→ "Membership" 탭에서 활성 상태 확인
→ Team ID 확인 (예: ABC123DEF4)
```

---

### 💡 Apple Developer 빠른 승인 팁

1. **정확한 정보 입력**
   - Apple ID 이름 = 신분증 이름
   - 전화번호 정확하게
   - 이메일 즉시 확인

2. **2단계 인증 켜기**
   - Apple ID > Security > Two-Factor Authentication
   - 더 빠른 승인

3. **영어 사용**
   - 주소를 영어로 입력
   - 전화 받을 때 영어로 답변 준비

4. **업무 시간 신청**
   - 미국 PST 기준 업무 시간 (한국 시간 새벽 2-10시)
   - 전화 인증 빠르게 받을 수 있음

---

## 🪟 Part 2: Windows 코드 서명 인증서 즉시 구매 ($200)

### ⏱️ 소요 시간: 30분 신청 + 1-3일 발급

### 추천: Sectigo OV (구 Comodo)

**왜 Sectigo?**
- ✅ 가장 저렴 ($199/년)
- ✅ 빠른 발급 (1-3일)
- ✅ Microsoft SmartScreen 신뢰
- ✅ 쉬운 절차

---

### Step 1: 인증서 구매 사이트 선택

#### 🔗 **추천 사이트들** (가격 비교)

**1. Comodo SSL Store (공식 재판매)**
```
https://comodosslstore.com/code-signing/sectigo-code-signing-certificate.aspx
가격: $199/년
할인: 종종 $169까지 할인
```

**2. SSL.com**
```
https://www.ssl.com/certificates/code-signing/
가격: $200/년
무료 재발급
```

**3. GoGetSSL**
```
https://www.gogetssl.com/
가격: $175/년 (최저가!)
단점: 지원이 느릴 수 있음
```

**4. Sectigo 공식 (비추천 - 비쌈)**
```
https://store.sectigo.com/
가격: $299/년
장점: 공식 사이트, 빠른 지원
```

---

### Step 2: Comodo SSL Store에서 구매 (예시)

#### 1. 사이트 접속
```
https://comodosslstore.com/code-signing/sectigo-code-signing-certificate.aspx
```

#### 2. "Add to Cart" 클릭
- Product: **Sectigo Code Signing Certificate (OV)**
- Validity: **1 Year** ($199)
- 2 Year는 $379 (20% 할인)

#### 3. 장바구니 확인
```
Subtotal:      $199.00
Discount:      -$30.00 (쿠폰 있으면)
Total:         $169.00 - $199.00
```

#### 4. 회원 가입 / 로그인
```
Email:         stevewon@qrchat.io
Password:      강력한 비밀번호
Company Name:  QRChat Inc. (또는 개인사업자명)
```

#### 5. 결제 정보 입력
```
Payment Method:  Credit Card
Card Type:       Visa / Mastercard
Card Number:     1234-5678-9012-3456
CVV:            123
Billing Address: 사업자 등록증 주소
```

#### 6. "Complete Order" 클릭
- 주문 번호 저장!
- 확인 이메일 수신

---

### Step 3: CSR (Certificate Signing Request) 생성

#### 🔧 **방법 1: OpenSSL (모든 플랫폼, 추천)**

```bash
# OpenSSL 설치 확인
openssl version

# 없으면 설치
# Windows: https://slproweb.com/products/Win32OpenSSL.html 다운로드
# macOS: brew install openssl
# Linux: sudo apt install openssl

# CSR 생성
openssl req -new -newkey rsa:2048 -nodes \
  -keyout qrchat_private.key \
  -out qrchat.csr \
  -subj "/C=KR/ST=Seoul/L=Seoul/O=QRChat Inc./OU=Development/CN=QRChat/emailAddress=stevewon@qrchat.io"

# 생성된 파일:
# qrchat.csr          → CA에 제출
# qrchat_private.key  → 절대 공유 금지! 안전하게 보관!
```

#### 🔧 **방법 2: Windows certreq (Windows 전용)**

```powershell
# PowerShell 관리자 권한 실행
certmgr.msc

# Personal > Certificates 우클릭
# All Tasks > Advanced Operations > Create Custom Request

# 설정:
# Template: (No template) Legacy key
# Request Format: PKCS #10
# Key: RSA, 2048 bits
# Hash Algorithm: SHA256

# Subject에 정보 입력:
# CN = QRChat
# O = QRChat Inc.
# L = Seoul
# S = Seoul
# C = KR
# E = stevewon@qrchat.io

# 파일 저장: qrchat.csr
```

#### 📋 **CSR 내용 복사**
```bash
cat qrchat.csr

# 출력 예시:
-----BEGIN CERTIFICATE REQUEST-----
MIICvDCCAaQCAQAwdzELMAkGA1UEBhMCS1IxDjAMBgNVBAgMBVNlb3VsMQ4wDAYD
VQQHDAVTZW91bDEUMBIGA1UECgwLUVJDaGF0IEluYy4xFDASBgNVBAsMC0RldmVs
b3BtZW50MQ8wDQYDVQQDDAZRUkNoYXQxHzAdBgkqhkiG9w0BCQEWEHNAZXZld29u
QHFyY2hhdC5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAL...
-----END CERTIFICATE REQUEST-----

# 전체 내용 복사 (BEGIN부터 END까지)
```

---

### Step 4: CA 포털에서 인증서 신청

#### 1. 이메일에서 링크 클릭
```
제목: Complete Your Sectigo Code Signing Certificate Order
→ "Complete Your Order" 링크 클릭
```

#### 2. CSR 제출
```
Certificate Signing Request (CSR):
[여기에 위에서 복사한 CSR 전체 붙여넣기]

Common Name (CN): QRChat
Organization (O): QRChat Inc.
...
```

#### 3. 회사 정보 입력
```
Company Legal Name:   QRChat Inc.
                      (사업자 등록증과 정확히 동일하게!)

Doing Business As:    QRChat

Address:              서울시 강남구 테헤란로 123
City:                 Seoul
State/Province:       Seoul
Postal Code:          06234
Country:              South Korea

Phone Number:         +82-2-1234-5678 (사업장 전화!)
Email:                stevewon@qrchat.io (회사 이메일)

Website (optional):   https://qrchat.io
```

#### 4. 담당자 정보
```
Technical Contact:    홍길동
Email:               stevewon@qrchat.io
Phone:               +82-10-1234-5678
```

---

### Step 5: 서류 업로드

#### 📄 **필수 서류 준비**

**1. 사업자 등록증**
```
파일 형식: PDF 또는 JPG
해상도: 300 DPI 이상
크기: 5 MB 이하
상태: 선명하게 스캔
발급일: 최근 3개월 이내 권장
```

**준비 방법:**
- 원본 서류를 스캔 (스캔 앱 사용 권장)
- 또는 사진 촬영 (밝은 곳, 그림자 없이)
- PDF로 변환

**2. 대표자 신분증 (주민등록증 또는 여권)**
```
파일 형식: PDF 또는 JPG
필수: 앞면 + 뒷면 (주민등록증)
크기: 5 MB 이하
```

**3. 전화 확인 동의서 (CA에서 제공)**
```
1. 다운로드: Authorization_Letter.pdf
2. 프린트
3. 서명 (대표자)
4. 스캔 후 업로드
```

#### 📤 **업로드**
```
Document Type:        Business Registration
File:                 사업자등록증.pdf
[Upload]

Document Type:        ID Proof
File:                 신분증_앞뒷면.pdf
[Upload]

Document Type:        Authorization Letter
File:                 서명된_동의서.pdf
[Upload]

[Submit Documents]
```

---

### Step 6: 전화 확인 대기

#### 📞 **전화 받기 (1-2일 내)**

**누가 전화하나요?**
- Sectigo 검증팀 (영어)
- 또는 한국 파트너 (한국어)

**무엇을 물어보나요?**
```
질문 1: "Are you [귀하의 이름]?"
답변: "Yes, that's me."

질문 2: "Did you request a code signing certificate for QRChat?"
답변: "Yes, I did."

질문 3: "Can you confirm your email address?"
답변: "[귀하의 이메일]"

질문 4: "What is your company name?"
답변: "QRChat Inc."

→ 완료! "Thank you, your certificate will be issued soon."
```

**전화 못 받으면?**
- 다시 전화 옴 (2-3회 시도)
- 또는 이메일로 일정 조율
- 긴급: support@comodoca.com 이메일

#### 📧 **이메일 확인**
```
제목: Verify your email for code signing certificate
→ "Verify Email" 링크 클릭
→ 확인 완료
```

---

### Step 7: 인증서 발급 및 다운로드

#### ✅ **발급 완료 이메일 (1-3일 후)**
```
제목: Your Sectigo Code Signing Certificate is ready!

Certificate Details:
Common Name:    QRChat
Serial Number:  1234567890ABCDEF
Valid From:     2026-02-19
Valid Until:    2027-02-19
```

#### 📥 **인증서 다운로드**
```
1. 이메일의 "Download Certificate" 링크 클릭
2. 또는 CA 포털 로그인 > Orders > Download

다운로드 파일:
- qrchat.cer (또는 .crt) - 인증서
- sectigo_intermediate.cer - 중간 인증서
```

#### 🔐 **PFX 파일 생성 (Windows 서명용)**

**방법 1: OpenSSL (추천)**
```bash
# .cer + .key → .pfx로 합치기
openssl pkcs12 -export \
  -out qrchat.pfx \
  -inkey qrchat_private.key \
  -in qrchat.cer \
  -certfile sectigo_intermediate.cer

# 비밀번호 입력 프롬프트:
Enter Export Password: [강력한 비밀번호]
Verifying - Enter Export Password: [같은 비밀번호]

# 생성 완료: qrchat.pfx
```

**방법 2: Windows certmgr**
```
1. certmgr.msc 실행
2. Personal > Certificates 우클릭
3. All Tasks > Import
4. qrchat.cer 선택 (자동으로 개인 키와 매칭)
5. 인증서 우클릭 > All Tasks > Export
6. "Yes, export the private key" 선택
7. PKCS #12 (.PFX) 형식
8. 강력한 비밀번호 설정
9. qrchat.pfx 저장
```

#### 🎉 **완료!**
```
✅ qrchat.pfx - Windows 서명용
✅ 비밀번호 - 안전하게 저장!
✅ 만료일 - 1년 후 (2027-02-19)
```

---

## 📦 Part 3: 즉시 테스트

### macOS 서명 테스트 (Apple Developer 승인 후)

```bash
cd /home/user/qrchat_desktop

# 환경 변수 설정
export APPLE_ID="stevewon@qrchat.io"
export APPLE_TEAM_ID="ABC123DEF4"  # developer.apple.com에서 확인
export APPLE_APP_PASSWORD="xxxx-xxxx-xxxx-xxxx"  # appleid.apple.com에서 생성
export CERTIFICATE_NAME="Developer ID Application: 홍길동 (ABC123DEF4)"

# 서명 실행!
./sign_macos.sh

# 예상 소요 시간: 10-15분
# - Flutter 빌드: 5분
# - 서명: 1분
# - Notarization: 5-10분
```

### Windows 서명 테스트 (인증서 발급 후)

```batch
REM Windows에서 실행
cd C:\qrchat_desktop

REM 환경 변수 설정
set PFX_FILE=qrchat.pfx
set PFX_PASSWORD=your_strong_password

REM 서명 실행!
sign_windows.bat

REM 예상 소요 시간: 5-7분
REM - Flutter 빌드: 3분
REM - 서명: 1분
REM - 설치 프로그램: 3분
```

### Linux 서명 테스트 (즉시 가능!)

```bash
cd /home/user/qrchat_desktop

# 서명 실행 (GPG 키 자동 생성)
./sign_linux.sh

# 예상 소요 시간: 5-7분
# - Flutter 빌드: 3분
# - .deb 생성: 1분
# - AppImage 생성: 3분
```

---

## 💾 인증서 안전 보관

### 백업 필수!

```bash
# 안전한 디렉토리 생성
mkdir -p ~/qrchat_certificates
chmod 700 ~/qrchat_certificates

# 파일 복사
cp qrchat.pfx ~/qrchat_certificates/
cp qrchat_private.key ~/qrchat_certificates/
cp qrchat.cer ~/qrchat_certificates/

# 비밀번호 파일 생성 (암호화된 곳에 보관)
cat > ~/qrchat_certificates/README.txt << EOF
QRChat Code Signing Certificates

PFX Password: [여기에 비밀번호]
Valid Until: 2027-02-19
Apple Team ID: ABC123DEF4
Apple App Password: xxxx-xxxx-xxxx-xxxx

⚠️ 이 파일을 절대 공유하지 마세요!
⚠️ GitHub에 업로드하지 마세요!
EOF

# 권한 설정
chmod 600 ~/qrchat_certificates/*

# 암호화 백업 (선택)
tar -czf qrchat_certificates.tar.gz ~/qrchat_certificates/
gpg -c qrchat_certificates.tar.gz  # 비밀번호로 암호화
```

### 클라우드 백업 (암호화 필수!)

```bash
# 1. 암호화된 파일만 업로드
gpg -c qrchat.pfx  # → qrchat.pfx.gpg

# 2. Google Drive / Dropbox / iCloud에 업로드
# qrchat.pfx.gpg (암호화됨)
# qrchat.cer (공개 인증서, 암호화 불필요)

# 3. 복원 시
gpg -d qrchat.pfx.gpg > qrchat.pfx
```

---

## 📊 구매 완료 체크리스트

### Apple Developer
- [ ] Apple ID 생성 또는 로그인
- [ ] Apple Developer Program 결제 ($99)
- [ ] 이메일 인증 완료
- [ ] 승인 대기 중 (1-2일)
- [ ] 승인 완료 이메일 받음
- [ ] Team ID 확인
- [ ] App-Specific Password 생성
- [ ] 테스트 서명 성공

### Windows 코드 서명
- [ ] CA 사이트 선택 (Sectigo 추천)
- [ ] 인증서 결제 ($199-200)
- [ ] CSR 생성
- [ ] CSR 제출
- [ ] 서류 업로드 (사업자, 신분증)
- [ ] 전화 확인 완료
- [ ] 이메일 확인 완료
- [ ] 인증서 다운로드
- [ ] PFX 파일 생성
- [ ] 비밀번호 안전 보관
- [ ] 테스트 서명 성공

### Linux GPG
- [ ] sign_linux.sh 실행
- [ ] GPG 키 생성 완료
- [ ] 공개 키 배포
- [ ] 테스트 서명 성공

---

## 🆘 문제 해결

### Apple Developer 승인이 지연됨 (3일 이상)
```
1. developer.apple.com/contact 에서 문의
2. "Enrollment & Account Management" 선택
3. 주문 번호 제공
4. 보통 24시간 내 답변
```

### Windows 인증서 전화가 안 옴
```
1. support@comodoca.com 이메일
2. 제목: "Phone verification request - Order #12345"
3. 주문 번호 + 전화 가능 시간 명시
4. 보통 1영업일 내 전화
```

### 서명 스크립트 에러
```bash
# macOS
./sign_macos.sh 2>&1 | tee sign_error.log
# 에러 로그를 sign_error.log에 저장

# Windows
sign_windows.bat > sign_error.log 2>&1
```

### 비용이 부담됨
**무료 대안:**
- Linux GPG만 사용 (무료!)
- macOS/Windows는 나중에 구매
- 또는 EV 대신 OV ($200)

---

## 🎯 타임라인 요약

```
오늘 (Day 0):
✅ Apple Developer 신청 (15분)
✅ Windows 인증서 신청 (30분)
✅ Linux GPG 서명 (즉시 가능!)

Day 1-2:
⏳ Apple Developer 승인 대기
⏳ Windows 서류 검토

Day 2-3:
📞 Windows 전화 확인

Day 3:
✅ Apple 승인 완료 → macOS 서명 가능!
✅ Windows 인증서 발급 → Windows 서명 가능!

Day 4:
🚀 모든 플랫폼 서명 완료!
🚀 v2.0.0 정식 출시!
```

---

## 💰 최종 비용

| 항목 | 비용 | 시기 |
|---|---|---|
| Apple Developer | $99 | 오늘 즉시 |
| Windows OV | $199-200 | 오늘 즉시 |
| Linux GPG | **무료** | 즉시 사용 |
| **총 비용** | **$298-299** | 1년 |

**연간 갱신**: 매년 같은 금액

---

## 🚀 지금 바로 시작!

### 1️⃣ **Apple Developer 신청** (지금 바로!)
```
https://developer.apple.com/programs/enroll/
→ 15분 소요
→ $99 결제
→ 1-2일 승인 대기
```

### 2️⃣ **Windows 인증서 신청** (지금 바로!)
```
https://comodosslstore.com/code-signing
→ 30분 소요
→ $199 결제
→ 1-3일 발급 대기
```

### 3️⃣ **Linux GPG 서명** (지금 바로!)
```bash
cd /home/user/qrchat_desktop
./sign_linux.sh
→ 무료!
→ 5분 완료!
```

---

**준비됐나요? 지금 바로 시작하세요!** 🚀

질문이 있으면 언제든지 물어보세요! 💪
